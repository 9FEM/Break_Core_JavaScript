
## '콜백 함수' 내부 this에 다른 값 바인딩하기
객체의 메서드를 콜백 함수로 전달하면 해당 객체를 this로 바라볼 수 없게 된다는 특징이 있다.
그럼에도 콜백 함수 내부에서 this가 객체를 바라보게 하고 싶다면 어떻게 해야 할까?

별도의 인자로 this를 받는 함수의 경우에는 여기에 원하는 값을 넘겨주면 되지만 그렇지 않은 경우에는 this의 제어권도 넘겨주게 되므로 사용자가 임의로 값을 바꿀 수 없는데...<br>
이에 대해 콜백함수 내부 this에 다른 값을 바인딩하기 위한 방법들을 살펴 보려 한다. 


### 방법1) 전통적인 방식
this를 다른 변수에 담아 콜백 함수로 활용할 함수에서는 this 대신 그 변수를 사용하게 하고, 이를 클로저로 만드는 방식
![](https://velog.velcdn.com/images/day_1226/post/0ea1c859-93ac-46c8-a485-2dfd8e0ec6e2/image.png)
>1. `obj1.func` 메서드 내부에서 self 변수에 `this`를 담는다. 
>2. 익명 함수를 선언과 동시에 반환한다.
>3. `obj1.func` 메서드를 호출하면 익명 내부함수가 반환되어 callback 변수에 담긴다.
>4. `setTimeout`함수에 callback을 인자로 전달하면 1초 뒤 callback이 실행되면서 'obg1'을 출력한다.

- this를 우회적으로나마 활용함으로써 다양한 상황에서 원하는 객체를 바라보는 콜백 함수를 만들 수 있는 방법이다.

그러나 이 방식은 실제로 this를 사용하지 않을 뿐더러 (this 대신 obj1을 바로 할당) 너무 번거롭다. 다른 방법을 사용하자.

---
### 방법2) 콜백 함수 내부에서 this를 사용하지 않은 경우
![](https://velog.velcdn.com/images/day_1226/post/34135194-f77f-4ed2-acd9-75740c771cec/image.png)

아까 살펴본 전통적인 방식의 코드에서 변형하여, this를 사용하지 않았을 때의 코드 모습이다.
훨씬 간결하고 직관적으로 바뀌었지만 아직 아쉬운 부분이 존재하는데...
> 다양한 객체에 재활용할 필요성이 없는 경우라면 기꺼이 사용해도 문제가 없지만, 재활용이 필요한 경우라면?
- 위와 같은 방법은 처음부터 바라볼 객체를 지정했기 때문에, 해당 함수는 this를 이용해 다양한 상황에 재활용할 수 없게 되어버린다.

---
### func 함수 재활용 - this를 사용하지 않는다면?
![](https://velog.velcdn.com/images/day_1226/post/1ef31bf9-287c-403e-9f4a-d16f93f7f5af/image.png)

>`방법1`은 `obj1.func`이 실행되면서 callback2의 this는 `obj2`, callback3의 this는 `obj3`을 가리키도록 할 수 있다.

>이에 비해 `방법2`는 언제나 `obj1`을 바라보도록 명시적으로 지정했기 때문에 다른 객체를 바라보게 할 수가 없다. 



이런 문제점 때문에 복잡하고 클로저로 인해 메모리를 낭비함에도 불구하고 `방법1`과 같은 전통적인 방식이 널리 통용되어 사용될 수 밖에 없었다. (이후 bind 메서드의 등장 전까지는...) 

---
### 방법3) 해결책 - bind() 메서드


ES5부터 등장한 `bind()` 메서드를 활용하면 메서드가 콜백 함수로 넘겨진다 해도 위 코드와 같이 this가 될 대상을 명시적으로 바인딩해 줄 수 있다.
>**`bind()`** 
JavaScript의 내장 함수로, 함수를 호출할 때 특정 객체를 바인딩하여 함수 내부에서 this로 참조할 수 있도록 한다.

![](https://velog.velcdn.com/images/day_1226/post/ade7a9a4-7cb2-41ab-a75a-3e74720f347a/image.png)setTimeout을 사용하여 콜백 함수를 예약할 때, `bind()` 메서드를 통해 바인딩한 함수를 지정하면 해당 객체의 속성에 접근할 수 있다. 
첫 번째 setTimeout은  obj1 객체의 name 속성인 `obj1`을 출력을 출력하고, 두 번째 setTimeout은 obj2 객체의 name 속성인 `obj2`를 출력한다.

<br>

## 결론
>사용자가 임의로 콜백 함수의 this 바꾸고 싶을 경우 **bind** 메서드를 활용하자~!
